// d3-format@3.1.2 downloaded from https://ga.jspm.io/npm:d3-format@3.1.2/src/index.js

function t(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function i(t,i){if(!isFinite(t)||t===0)return null;var r=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function r(t){return t=i(Math.abs(t)),t?t[1]:NaN}function n(t,i){return function(r,n){var e=r.length,a=[],o=0,s=t[0],h=0;while(e>0&&s>0){h+s+1>n&&(s=Math.max(1,n-h));a.push(r.substring(e-=s,e+s));if((h+=s+1)>n)break;s=t[o=(o+1)%t.length]}return a.reverse().join(i)}}function e(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(t){if(!(i=a.exec(t)))throw new Error("invalid format: "+t);var i;return new s({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}o.prototype=s.prototype;function s(t){this.fill=t.fill===void 0?" ":t.fill+"";this.align=t.align===void 0?">":t.align+"";this.sign=t.sign===void 0?"-":t.sign+"";this.symbol=t.symbol===void 0?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===void 0?void 0:+t.width;this.comma=!!t.comma;this.precision=t.precision===void 0?void 0:+t.precision;this.trim=!!t.trim;this.type=t.type===void 0?"":t.type+""}s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h(t){t:for(var i,r=t.length,n=1,e=-1;n<r;++n)switch(t[n]){case".":e=i=n;break;case"0":e===0&&(e=n);i=n;break;default:if(!+t[n])break t;e>0&&(e=0);break}return e>0?t.slice(0,e)+t.slice(i+1):t}var c;function u(t,r){var n=i(t,r);if(!n)return c=void 0,t.toPrecision(r);var e=n[0],a=n[1],o=a-(c=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=e.length;return o===s?e:o>s?e+new Array(o-s+1).join("0"):o>0?e.slice(0,o)+"."+e.slice(o):"0."+new Array(1-o).join("0")+i(t,Math.max(0,r+o-1))[0]}function l(t,r){var n=i(t,r);if(!n)return t+"";var e=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+e:e.length>a+1?e.slice(0,a+1)+"."+e.slice(a+1):e+new Array(a-e.length+2).join("0")}var f={"%":(t,i)=>(t*100).toFixed(i),b:t=>Math.round(t).toString(2),c:t=>t+"",d:t,e:(t,i)=>t.toExponential(i),f:(t,i)=>t.toFixed(i),g:(t,i)=>t.toPrecision(i),o:t=>Math.round(t).toString(8),p:(t,i)=>l(t*100,i),r:l,s:u,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function d(t){return t}var m=Array.prototype.map,v=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function g(t){var i=t.grouping===void 0||t.thousands===void 0?d:n(m.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",u=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?d:e(m.call(t.numerals,String)),g=t.percent===void 0?"%":t.percent+"",p=t.minus===void 0?"−":t.minus+"",M=t.nan===void 0?"NaN":t.nan+"";function y(t,r){t=o(t);var n=t.fill,e=t.align,d=t.sign,m=t.symbol,y=t.zero,x=t.width,b=t.comma,w=t.precision,k=t.trim,N=t.type;N==="n"?(b=true,N="g"):f[N]||(w===void 0&&(w=12),k=true,N="g");(y||n==="0"&&e==="=")&&(y=true,n="0",e="=");var S=(r&&r.prefix!==void 0?r.prefix:"")+(m==="$"?a:m==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():""),z=(m==="$"?s:/[%p]/.test(N)?g:"")+(r&&r.suffix!==void 0?r.suffix:"");var A=f[N],j=/[defgprs%]/.test(N);w=w===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(t){var r,a,o,s=S,f=z;if(N==="c"){f=A(t)+f;t=""}else{t=+t;var m=t<0||1/t<0;t=isNaN(t)?M:A(Math.abs(t),w);k&&(t=h(t));m&&+t===0&&d!=="+"&&(m=false);s=(m?d==="("?d:p:d==="-"||d==="("?"":d)+s;f=(N!=="s"||isNaN(t)||c===void 0?"":v[8+c/3])+f+(m&&d==="("?")":"");if(j){r=-1,a=t.length;while(++r<a)if(o=t.charCodeAt(r),48>o||o>57){f=(o===46?u+t.slice(r+1):t.slice(r))+f;t=t.slice(0,r);break}}}b&&!y&&(t=i(t,Infinity));var g=s.length+t.length+f.length,E=g<x?new Array(x-g+1).join(n):"";b&&y&&(t=i(E+t,E.length?x-f.length:Infinity),E="");switch(e){case"<":t=s+t+f+E;break;case"=":t=s+E+t+f;break;case"^":t=E.slice(0,g=E.length>>1)+s+t+f+E.slice(g);break;default:t=E+s+t+f;break}return l(t)}E.toString=function(){return t+""};return E}function x(t,i){var n=Math.max(-8,Math.min(8,Math.floor(r(i)/3)))*3,e=Math.pow(10,-n),a=y((t=o(t),t.type="f",t),{suffix:v[8+n/3]});return function(t){return a(e*t)}}return{format:y,formatPrefix:x}}var p;var M;var y;x({thousands:",",grouping:[3],currency:["$",""]});function x(t){p=g(t);M=p.format;y=p.formatPrefix;return p}function b(t){return Math.max(0,-r(Math.abs(t)))}function w(t,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(r(i)/3)))*3-r(Math.abs(t)))}function k(t,i){t=Math.abs(t),i=Math.abs(i)-t;return Math.max(0,r(i)-r(t))+1}export{s as FormatSpecifier,M as format,x as formatDefaultLocale,g as formatLocale,y as formatPrefix,o as formatSpecifier,b as precisionFixed,w as precisionPrefix,k as precisionRound};

