// @codemirror/lang-javascript@6.2.4 downloaded from https://ga.jspm.io/npm:@codemirror/lang-javascript@6.2.4/dist/index.js

import{parser as e}from"@lezer/javascript";import{syntaxTree as t,LRLanguage as n,indentNodeProp as r,foldNodeProp as o,continuedIndent as a,delimitedIndent as i,flatIndent as l,foldInside as s,defineLanguageFacet as c,sublanguageProp as f,LanguageSupport as m}from"@codemirror/language";import{EditorSelection as p}from"@codemirror/state";import{EditorView as u}from"@codemirror/view";import{snippetCompletion as d,ifNotIn as y,completeFromList as g}from"@codemirror/autocomplete";import{NodeWeakMap as b,IterMode as h}from"@lezer/common";const S=[d("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),d("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),d("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),d("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),d("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),d("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),d("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),d("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),d("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),d('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),d('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})];const $=S.concat([d("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),d("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),d("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]);const v=new b;const w=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function x(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");r&&n(r,e);return true}}const k=["FunctionDeclaration"];const T={FunctionDeclaration:x("function"),ClassDeclaration:x("class"),ClassExpression:()=>true,EnumDeclaration:x("constant"),TypeAliasDeclaration:x("type"),NamespaceDeclaration:x("namespace"),VariableDefinition(e,t){e.matchContext(k)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function J(e,t){let n=v.get(t);if(n)return n;let r=[],o=true;function a(t,n){let o=e.sliceString(t.from,t.to);r.push({label:o,type:n})}t.cursor(h.IncludeAnonymous).iterate((t=>{if(o)o=false;else if(t.name){let e=T[t.name];if(e&&e(t,a)||w.has(t.name))return false}else if(t.to-t.from>8192){for(let n of J(e,t.node))r.push(n);return false}}));v.set(t,r);return r}const X=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;const C=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function D(e){let n=t(e.state).resolveInner(e.pos,-1);if(C.indexOf(n.name)>-1)return null;let r=n.name=="VariableName"||n.to-n.from<20&&X.test(e.state.sliceDoc(n.from,n.to));if(!r&&!e.explicit)return null;let o=[];for(let t=n;t;t=t.parent)w.has(t.name)&&(o=o.concat(J(e.state.doc,t)));return{options:o,from:r?n.from:e.pos,validFor:X}}function A(e,t,n){var r;let o=[];for(;;){let a,i=t.firstChild;if((i===null||i===void 0?void 0:i.name)=="VariableName"){o.push(e(i));return{path:o.reverse(),name:n}}if((i===null||i===void 0?void 0:i.name)!="MemberExpression"||((r=a=i.lastChild)===null||r===void 0?void 0:r.name)!="PropertyName")return null;o.push(e(a));t=i}}function E(e){let n=t=>e.state.doc.sliceString(t.from,t.to);let r=t(e.state).resolveInner(e.pos,-1);return r.name=="PropertyName"?A(n,r.parent,n(r)):r.name!="."&&r.name!="?."||r.parent.name!="MemberExpression"?C.indexOf(r.name)>-1?null:r.name=="VariableName"||r.to-r.from<20&&X.test(n(r))?{path:[],name:n(r)}:r.name=="MemberExpression"?A(n,r,""):e.explicit?{path:[],name:""}:null:A(n,r.parent,"")}function O(e,t){let n=[],r=new Set;for(let o=0;;o++){for(let a of(Object.getOwnPropertyNames||Object.keys)(e)){if(!/^[a-zA-Z_$\xaa-\uffdc][\w$\xaa-\uffdc]*$/.test(a)||r.has(a))continue;r.add(a);let i;try{i=e[a]}catch(e){continue}n.push({label:a,type:typeof i=="function"?/^[A-Z]/.test(a)?"class":t?"function":"method":t?"variable":"property",boost:-o})}let a=Object.getPrototypeOf(e);if(!a)return n;e=a}}function I(e){let t=new Map;return n=>{let r=E(n);if(!r)return null;let o=e;for(let e of r.path){o=o[e];if(!o)return null}let a=t.get(o);a||t.set(o,a=O(o,!r.path.length));return{from:n.pos-r.name.length,options:a,validFor:X}}}const B=n.define({name:"javascript",parser:e.configure({props:[r.add({IfStatement:a({except:/^\s*({|else\b)/}),TryStatement:a({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:l,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:i({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":a({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),o.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":s,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}});const j={test:e=>/^JSX/.test(e.name),facet:c({commentTokens:{block:{open:"{/*",close:"*/}"}}})};const F=B.configure({dialect:"ts"},"typescript");const N=B.configure({dialect:"jsx",props:[f.add((e=>e.isTop?[j]:void 0))]});const P=B.configure({dialect:"jsx ts",props:[f.add((e=>e.isTop?[j]:void 0))]},"typescript");let V=e=>({label:e,type:"keyword"});const M="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(V);const L=M.concat(["declare","implements","private","protected","public"].map(V));function _(e={}){let t=e.jsx?e.typescript?P:N:e.typescript?F:B;let n=e.typescript?$.concat(L):S.concat(M);return new m(t,[B.data.of({autocomplete:y(C,g(n))}),B.data.of({autocomplete:D}),e.jsx?H:[]])}function R(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function z(e,t,n=e.length){for(let r=t===null||t===void 0?void 0:t.firstChild;r;r=r.nextSibling)if(r.name=="JSXIdentifier"||r.name=="JSXBuiltin"||r.name=="JSXNamespacedName"||r.name=="JSXMemberExpression")return e.sliceString(r.from,Math.min(r.to,n));return""}const Z=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent);const H=u.inputHandler.of(((e,n,r,o,a)=>{if((Z?e.composing:e.compositionStarted)||e.state.readOnly||n!=r||o!=">"&&o!="/"||!B.isActiveAt(e.state,n,-1))return false;let i=a(),{state:l}=i;let s=l.changeByRange((e=>{var n;let r,{head:a}=e,i=t(l).resolveInner(a-1,-1);i.name=="JSXStartTag"&&(i=i.parent);if(l.doc.sliceString(a-1,a)!=o||i.name=="JSXAttributeValue"&&i.to>a);else{if(o==">"&&i.name=="JSXFragmentTag")return{range:e,changes:{from:a,insert:"</>"}};if(o=="/"&&i.name=="JSXStartCloseTag"){let e=i.parent,t=e.parent;if(t&&e.from==a-2&&((r=z(l.doc,t.firstChild,a))||((n=t.firstChild)===null||n===void 0?void 0:n.name)=="JSXFragmentTag")){let e=`${r}>`;return{range:p.cursor(a+e.length,-1),changes:{from:a,insert:e}}}}else if(o==">"){let t=R(i);if(t&&t.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(l.doc.sliceString(a,a+2))&&(r=z(l.doc,t,a)))return{range:e,changes:{from:a,insert:`</${r}>`}}}}return{range:e}}));if(s.changes.empty)return false;e.dispatch([i,l.update(s,{userEvent:"input.complete",scrollIntoView:true})]);return true}));function q(e,t){if(!t){t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:true,node:true,es6:true,es2015:true,es2017:true,es2020:true},rules:{}};e.getRules().forEach(((e,n)=>{var r;((r=e.meta.docs)===null||r===void 0?void 0:r.recommended)&&(t.rules[n]=2)}))}return n=>{let{state:r}=n,o=[];for(let{from:n,to:a}of B.findRegions(r)){let i=r.doc.lineAt(n),l={line:i.number-1,col:n-i.from,pos:n};for(let i of e.verify(r.sliceDoc(n,a),t))o.push(K(i,r.doc,l))}return o}}function G(e,t,n,r){return n.line(e+r.line).from+t+(e==1?r.col-1:-1)}function K(e,t,n){let r=G(e.line,e.column,t,n);let o={from:r,to:e.endLine!=null&&e.endColumn!=1?G(e.endLine,e.endColumn,t,n):r,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:e.severity==1?"warning":"error"};if(e.fix){let{range:t,text:a}=e.fix,i=t[0]+n.pos-r,l=t[1]+n.pos-r;o.actions=[{name:"fix",apply(e,t){e.dispatch({changes:{from:t+i,to:t+l,insert:a},scrollIntoView:true})}}]}return o}export{H as autoCloseTags,E as completionPath,q as esLint,_ as javascript,B as javascriptLanguage,N as jsxLanguage,D as localCompletionSource,I as scopeCompletionSource,S as snippets,P as tsxLanguage,F as typescriptLanguage,$ as typescriptSnippets};

