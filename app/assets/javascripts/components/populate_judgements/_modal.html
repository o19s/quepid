<div class="modal-header">
  <button type="button" class="close" ng-click="ctrl.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <h3 class="modal-title">Populate Judgements</h3>
</div>
<div class="modal-body" ng-hide="ctrl.canUpdateCase">
  <p>You do not have edit permissions for cases.</p>
</div>

<div class="modal-body" ng-show="ctrl.canUpdateCase">
  <div ng-show='ctrl.share.loading'>
    <p>
      Loading your teams, this will be quick I promise!
      <i class='fa fa-spinner fa-spin'></i>
    </p>
  </div>
  <div class="alert alert-warning" role="alert" ng-if="ctrl.share.acase.queriesCount === 0">
    You do not have any queries to populate your book of judgements with.
  </div>

  <p>
    Explicit Judgements created by humans are a good way to start measuring your search quality.
  </p>
  <p>
    Populating judgements takes the list of queries and docs in the Case and updates a <i>Book of Judgements</i> that can then be rated.
  </p>

  <div class="text-center" ng-show="ctrl.share.teams.length === 0 && !ctrl.share.loading">
    <p>
      Books of Judgements are meant to be shared with a team, so go ahead and create a new team!
    </p>

    <a class="btn btn-primary btn-lg" ng-click="ctrl.goToTeamsPage()">
      <i class="fa fa-plus"></i>
      Create a team
    </a>
  </div>

  <div class="text-center" ng-show="ctrl.share.books.length === 0 && !ctrl.share.loading">
    <p>
      You have no Books of Judgements created yet, so go ahead and create a new Book!
    </p>

    <a class="btn btn-primary btn-lg" href="/books/new" target="_self">
      <i class="fa fa-plus"></i>
      Create a book
    </a>
  </div>

  <div ng-show="ctrl.share.books.length > 0 && !ctrl.share.loading">
    <div>
      <label>Select a Book of Judgements</label>

      <ul class="list-group">
        <li class="list-group-item"
          ng-repeat="book in ctrl.share.books track by book.name"
          ng-class="{ active: book.id === ctrl.activeBookId }"
          ng-click="selectBook(book)">
          {{book.name}}
        </li>
      </ul>
    </div>
  </div>

  <label>
    <input id="populate-book" type="checkbox" ng-model='ctrl.populateBook' ng-disabled="ctrl.share.books.length === 0 || ctrl.share.teams.length === 0"> Populate Book
    <span class="glyphicon glyphicon-question-sign" aria-hidden="true" popover-trigger="'mouseenter'" popover-placement="right" uib-popover="Select to update the list of Judgements to be rated with any new query / doc pairs that aren't currently in the Book."></span>
  </label>

  <div class='text-danger' ng-show="processingPrompt.error">
    An error ({{processingPrompt.error}}) occurred, please try again.<br />
    If the error persist, contact customer for further assistance.
  </div>

</div>

<div class="modal-footer">
  <a class="btn btn-primary pull-left" href="/books/new" target="_self" ng-disabled="processingPrompt.inProgress">
    <i class="glyphicon glyphicon-plus" style="color: #FFF"></i>
    Create a book
  </a>

  <button
    class="btn btn-success"
    ng-show="ctrl.canUpdateCase && ctrl.activeBookId && ctrl.specificActionLabel()"
    ng-click="ctrl.ok()"
    ng-disabled="processingPrompt.inProgress"
  >
    {{ ctrl.specificActionLabel() }}
  </button>
  <button class="btn btn-default" ng-click="ctrl.cancel()" ng-disabled="processingPrompt.inProgress">Cancel</button>
  <div ng-show="processingPrompt.inProgress">
    <div ng-show="!processingPrompt.done">
      Dealing with judgements (this can take a minute or so)
    </div>
  </div>
</div>
