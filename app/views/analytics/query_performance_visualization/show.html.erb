<%= link_to 'Back to Case', case_core_path(@case) %>


<div id="vis"/>
<script>
  const spec = {
"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
"data": {"url": "<%= analytics_query_performance_visualization_vega_data_url(case_id: @case.id, format: :json) %>"},
"mark": "bar",
"width": 1000,
"height": 600,
"background": null,
"encoding": {
  "x": {"aggregate": "sum", "field": "duration", "title": "Duration in Milliseconds"},
  "y": {"field": "variety", "title": "Query"},
  "color": {"field": "name", "title": "Events"}
},
"title": "Duration of Queries Performance",
"config": {}
};
  vegaEmbed("#vis", spec, {mode: "vega-lite"}).then(console.log).catch(console.warn);
</script>
